{"version":3,"sources":["../../src/models/register.js"],"names":["dbCheckUsernameAvailability","username","knex","count","from","whereRaw","raw","dbCheckEmailAvailability","email","dbCreateUser","userInformation","transaction","trx","insert","into","then","select","orderBy","data","id"],"mappings":";;;;;;;AAAA;;;;;;AAEO,MAAMA,oEAA8BC,YACzCC,eACGC,KADH,GAEGC,IAFH,CAEQ,OAFR,EAGGC,QAHH,CAGYH,eAAKI,GAAL,CAAS,uBAAT,EAAkCL,QAAlC,CAHZ,CADK;;AAMA,MAAMM,8DAA2BC,SACtCN,eACGC,KADH,GAEGC,IAFH,CAEQ,OAFR,EAGGC,QAHH,CAGYH,eAAKI,GAAL,CAAS,oBAAT,EAA+BE,KAA/B,CAHZ,CADK;;AAMA,MAAMC,sCAAeC,mBAC1BR,eAAKS,WAAL,CAAiBC,OAAO;AACtB,SAAOA,IACJC,MADI,CACGH,eADH,EAEJI,IAFI,CAEC,OAFD,EAGJC,IAHI,CAGC,MAAM;AACV,WAAOH,IACJI,MADI,CACG,IADH,EAEJZ,IAFI,CAEC,OAFD,EAGJa,OAHI,CAGI,IAHJ,EAGU,MAHV,EAIJF,IAJI,CAICG,QAAQ;AACZ,aAAOA,KAAK,CAAL,EAAQC,EAAf;AACD,KANI,CAAP;AAOD,GAXI,CAAP;AAYD,CAbD,CADK","file":"register.js","sourcesContent":["import knex from '../utils/knex';\n\nexport const dbCheckUsernameAvailability = username =>\n  knex\n    .count()\n    .from('users')\n    .whereRaw(knex.raw('LOWER(\"username\") = ?', username));\n\nexport const dbCheckEmailAvailability = email =>\n  knex\n    .count()\n    .from('users')\n    .whereRaw(knex.raw('LOWER(\"email\") = ?', email));\n\nexport const dbCreateUser = userInformation =>\n  knex.transaction(trx => {\n    return trx\n      .insert(userInformation)\n      .into('users')\n      .then(() => {\n        return trx\n          .select('id')\n          .from('users')\n          .orderBy('id', 'desc')\n          .then(data => {\n            return data[0].id;\n          });\n      });\n  });\n"]}